---
// Testimonials.astro

/* TODO: Testimonials are loaded from an external file */
/* FIXME: The interface can be integrated into this same component.*/

import testimonialsData from "../../data/testimonials.json";
import type { TestimonialsData } from "../../interfaces/Testimonial";
import styles from "./Testimonials.module.css";

const testimonials = testimonialsData as TestimonialsData;
---

<section class={styles.testimonials}>
  <h2>Reseñas de nuestros usuarios</h2>
  <div class={styles.testimonialsGrid}>
    {
      testimonials.map((t) => (
        <div class={styles.testimonialCard}>
          <img src={t.image} alt={t.name} class={styles.avatar} />
          <p class={styles.message}>“{t.message}”</p>
          <div class={styles.rating}>
            {Array.from({ length: 5 }, (_, i) => (
              <span
                class="material-icons"
                style={`color: ${i < t.rating ? "var(--primary-color)" : "#ccc"}`}
              >
                {i < t.rating ? "star" : "star_border"}
              </span>
            ))}
          </div>
          <p class={styles.name}>— {t.name}</p>
        </div>
      ))
    }
  </div>
</section>
