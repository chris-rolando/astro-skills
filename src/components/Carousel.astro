---
// Carousel.astro
// This component creates a image carousel.

// Interface for the props
interface CarouselProps {
  images: string[];
}

// Destructuring the images property
const { images = [] } = Astro.props as CarouselProps;
---

<section class="carousel">
  <div class="slides" id="carousel-container">
    {
      images.map((src, index) => (
        <img
          src={src}
          alt={`Slide ${index + 1}`}
          class="slide"
          style={index === 0 ? "display: block" : "display: none"}
        />
      ))
    }
  </div>

  {/*TODO: sent this div to a new component */}
  <div class="controls">
    <button onclick="prevSlide()">⟨</button>
    <button onclick="nextSlide()">⟩</button>
  </div>

</section>

<script type="module">
  let currentSlide = 0;
  const slides = [];

  document.addEventListener("DOMContentLoaded", () => {
    const container = document.getElementById("carousel-container");
    slides.push(...container.querySelectorAll(".slide"));
    showSlide(currentSlide);
  });

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.style.display = i === index ? "block" : "none";
    });
  }

  window.nextSlide = () => {
    currentSlide = (currentSlide + 1) % slides.length;
    showSlide(currentSlide);
  };

  window.prevSlide = () => {
    currentSlide = (currentSlide - 1 + slides.length) % slides.length;
    showSlide(currentSlide);
  };

  setInterval(nextSlide, 2000);
</script>

  {/*TODO: sent this to a .css */}
<style>
  .carousel {
    position: relative;
    max-width: 600px;
    margin: auto;
    overflow: hidden;
  }

  .slides img {
    width: 100%;
    border-radius: 1rem;
  }

  .controls {
    text-align: center;
    margin-top: 1rem;
  }

  .controls button {
    background-color: #0077ff;
    color: white;
    border: none;
    font-size: 1.5rem;
    margin: 0 0.5rem;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  .controls button:hover {
    background-color: #005ec2;
  }
</style>
